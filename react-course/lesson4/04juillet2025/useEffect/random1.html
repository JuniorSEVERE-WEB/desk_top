<!DOCTYPE html>
<html>
  <head>
    <title>React Basics</title>
  </head>
  <body>
    <div class="js-container"></div>

    <script src="https://unpkg.com/supersimpledev/react.js"></script>
    <script src="https://unpkg.com/supersimpledev/react-dom.js"></script>

    <script src="https://unpkg.com/supersimpledev/babel.js"></script>
    <script type="text/babel">

        function App()
        {
            const [quote, setQuote] = React.useState(null);
            const [loading, setLoading] = React.useState(true);
            const [error, setError] = React.useState(null);

            const localQuote = [
                {
                    content: "La vie est un mystere",
                    author: "Anonyme"
                },
                {
                    content: "La vie est belle",
                    author: "J.K.Rowling"
                },
                {
                    content: "La vie est un combat",
                    author: "A.Einstein"
                }
            ];

            const fetchQuote = async() => {
                setLoading(true);
                setError(null);

                try
                {
                    const response = await fetch('https://api.quotable.io/random');
                    if(!response.ok)
                    {
                        throw new Error("Failed to fetch quote");
                    }
                    const data = await response.json();
                    setQuote({
                        content: data.content,
                        author: data.author
                    });
                }

                catch(error)
                {
                    console.log("Error ", error);
                    setError(error);
                    const randomIndex = Math.floor(Math.random() * localQuote.length);
                    setQuote(localQuote[randomIndex])
                }
                finally 
                {
                    setLoading(false);
                }
            };

            React.useEffect(()=>{
                fetchQuote();
            },[]);

            return(
                <div style={{ padding: "20px", maxWidth: "600px", margin: "0 auto" }}>
                    <h1>Citation al√©atoire</h1>
                    
                    {loading && <p>‚è≥ Chargement...</p>}
                    
                    {error && <p style={{color: 'red'}}>‚ùå Erreur: {error.message}</p>}
                    
                    {quote && (
                        <blockquote style={{
                            border: '1px solid #ccc', 
                            padding: '20px', 
                            margin: '20px 0',
                            backgroundColor: '#f9f9f9'
                        }}>
                            <p style={{fontSize: '18px', fontStyle: 'italic', marginBottom: '10px'}}>
                                "{quote.content}"
                            </p>
                            <footer style={{textAlign: 'right', fontWeight: 'bold', color: '#666'}}>
                                ‚Äî {quote.author}
                            </footer>
                        </blockquote>
                    )}
                    
                    <button 
                        onClick={fetchQuote} 
                        style={{
                            padding: '10px 20px', 
                            fontSize: '16px',
                            backgroundColor: '#007bff',
                            color: 'white',
                            border: 'none',
                            borderRadius: '5px',
                            cursor: 'pointer'
                        }}
                    >
                        üîÑ Nouvelle citation
                    </button>
                </div>
            );
        }

  
      const container = document.querySelector('.js-container');
      ReactDOM.createRoot(container).render(<App />);
    </script>
  </body>
</html>