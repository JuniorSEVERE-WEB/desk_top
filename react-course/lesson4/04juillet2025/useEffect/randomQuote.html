<!DOCTYPE html>
<html>
  <head>
    <title>React Basics</title>
  </head>
  <body>
    <div class="js-container"></div>

    <script src="https://unpkg.com/supersimpledev/react.js"></script>
    <script src="https://unpkg.com/supersimpledev/react-dom.js"></script>

    <script src="https://unpkg.com/supersimpledev/babel.js"></script>
    <script type="text/babel">

        function RandomQuote()
        {
            const [quote, setQuote] = React.useState(null);
            const [loading, setLoading] = React.useState(true);
            const [error, setError] = React.useState(null);

            // Citations locales en cas de probl√®me r√©seau
            const localQuotes = [
                { content: "La vie est comme une bicyclette, il faut avancer pour ne pas perdre l'√©quilibre.", author: "Albert Einstein" },
                { content: "Le succ√®s, c'est tomber sept fois et se relever huit.", author: "Proverbe japonais" },
                { content: "Il n'y a qu'une fa√ßon d'√©chouer, c'est d'abandonner avant d'avoir r√©ussi.", author: "Georges Clemenceau" },
                { content: "L'imagination est plus importante que la connaissance.", author: "Albert Einstein" },
                { content: "Le bonheur, c'est quand vos actes sont en accord avec vos paroles.", author: "Gandhi" }
            ];

            // VERSION 1: Fonction fl√©ch√©e (votre style actuel)
            const fetchQuote = async () => {
                setLoading(true);
                setError(null);
                try {
                    console.log("D√©but de fetchQuote");
                    // API alternative qui fonctionne mieux avec CORS
                    const response = await fetch('https://dummyjson.com/quotes/random');
                    console.log("R√©ponse re√ßue:", response);
                    //jeffrey kaplan
                    //how to read so that  you retain information
                    if (!response.ok) {
                        throw new Error(`HTTP error! status: ${response.status}`);
                    }
                    
                    const data = await response.json();
                    console.log("Donn√©es re√ßues:", data);
                    
                    // Adapter le format de dummyjson √† notre structure
                    setQuote({
                        content: data.quote,
                        author: data.author
                    });
                } catch (error) {
                    console.error('Erreur compl√®te:', error);
                    setError("Probl√®me r√©seau - Citation locale affich√©e");
                    // Citation locale al√©atoire en cas d'erreur
                    const randomIndex = Math.floor(Math.random() * localQuotes.length);
                    setQuote(localQuotes[randomIndex]);
                } finally {
                    setLoading(false);
                }
            };
            //experience is the comb they give you when you've gone bald

            React.useEffect(()=>{
                fetchQuote();
            },[]);

            return (
                <div>
                    <h1>Citation aleatoire</h1>
                    
                    {loading && <p>‚è≥ Chargement...</p>}
                    
                    {error && <p style={{color: 'red'}}>‚ùå Erreur: {error}</p>}

                    {quote && (
                        <blockquote style={{border: '1px solid #ccc', padding: '20px', margin: '20px 0'}}>
                               <p style={{fontSize: '18px', fontStyle: 'italic'}}>"{quote.content}"</p>
                               <footer style={{textAlign: 'right', fontWeight: 'bold'}}>‚Äî {quote.author}</footer>
                        </blockquote>
                    )}

                    

                    <button onClick={fetchQuote} style={{padding: '10px 20px', fontSize: '16px'}}>
                        üîÑ Nouvelle citation
                    </button>
                </div>
            );

            // VERSION 2: Fonction normale (alternative)
            // const fetchQuote = async function() {
            //     setLoading(true);
            //     try {
            //         // Code API ici
            //     } catch (error) {
            //         console.error('Erreur:', error);
            //     } finally {
            //         setLoading(false);
            //     }
            // };
            
        }

  
      const container = document.querySelector('.js-container');
      ReactDOM.createRoot(container).render(<RandomQuote />);
    </script>
  </body>
</html>