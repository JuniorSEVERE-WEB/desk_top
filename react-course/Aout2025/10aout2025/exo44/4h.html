<!DOCTYPE html>
<html>
  <head>
    <title>React Basics</title>
  </head>
  <body>
    <div class="js-container"></div>

    <script src="https://unpkg.com/supersimpledev/react.js"></script>
    <script src="https://unpkg.com/supersimpledev/react-dom.js"></script>

    <script src="https://unpkg.com/supersimpledev/babel.js"></script>
    <script type="text/babel">

        function App() {
  const [count, setCount] = React.useState(0);
  const intervalRef = React.useRef(null); // pour stocker l'id de setInterval
  const buttonRef = React.useRef(null);

  function increaseCount() {
    setCount(prev => prev + 1); // functional updater : fiable
  }

  function resetCount() {
    setCount(0);
  }

  function startAutoClick() {
    // évite de créer plusieurs intervalles
    if (intervalRef.current !== null) return;

    intervalRef.current = setInterval(() => {
      // option A : simuler le clic (ok)
      // buttonRef.current?.click();

      // option B (préférée) : incrémenter directement
      setCount(prev => prev + 1);
    }, 1000);
  }

  function stopAutoClick() {
    if (intervalRef.current !== null) {
      clearInterval(intervalRef.current);
      intervalRef.current = null;
    }
  }

  // cleanup si le composant est démonté
  React.useEffect(() => {
    return () => {
      if (intervalRef.current !== null) {
        clearInterval(intervalRef.current);
      }
    };
  }, []);

  return (
    <>
      <button onClick={increaseCount} ref={buttonRef}>
        Clicked {count} {count === 1 ? 'time' : 'times'}
      </button>
      <button onClick={resetCount}>Reset</button>

      <button onClick={startAutoClick} disabled={!!intervalRef.current}>
        Start Auto Click
      </button>
      <button onClick={stopAutoClick} disabled={!intervalRef.current}>
        Stop Auto Click
      </button>
    </>
  );
}


  
      const container = document.querySelector('.js-container');
      ReactDOM.createRoot(container).render(<App />);
    </script>
  </body>
</html>